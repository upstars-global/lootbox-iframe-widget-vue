# –Ü–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è –∑ —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—ó Lootbox iFrame Widget

## –ó–∞–≥–∞–ª—å–Ω–∏–π –æ–ø–∏—Å

–¶–µ–π –¥–æ–∫—É–º–µ–Ω—Ç –º—ñ—Å—Ç–∏—Ç—å –≤—Å—é –Ω–µ–æ–±—Ö—ñ–¥–Ω—É —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –¥–ª—è —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—ó –≤—ñ–¥–∂–µ—Ç–∞ –ª—É—Ç–±–æ–∫—Å–∞ —á–µ—Ä–µ–∑ iframe –∑–∞–º—ñ—Å—Ç—å Vue-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ `LootBoxSpinWheel.vue`.

**–û—Å–Ω–æ–≤–Ω–∞ –∑–º—ñ–Ω–∞:** –ó–∞–º—ñ—Å—Ç—å –ø–µ—Ä–µ–¥–∞—á—ñ props —Ç–∞ –æ–±—Ä–æ–±–∫–∏ emit-–ø–æ–¥—ñ–π –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å—Å—è query-–ø–∞—Ä–∞–º–µ—Ç—Ä–∏ –≤ URL —Ç–∞ PostMessage API –¥–ª—è –∫–æ–º—É–Ω—ñ–∫–∞—Ü—ñ—ó.

---

## üìã Query-–ø–∞—Ä–∞–º–µ—Ç—Ä–∏ –¥–ª—è URL iframe

### –û–±–æ–≤'—è–∑–∫–æ–≤—ñ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏

#### `style`
- **–¢–∏–ø:** String
- **–û–ø–∏—Å:** –ù–∞–∑–≤–∞ —Ç–µ–º–∏ –≤—ñ–∑—É–∞–ª—å–Ω–æ–≥–æ –æ—Ñ–æ—Ä–º–ª–µ–Ω–Ω—è
- **–î–æ—Å—Ç—É–ø–Ω—ñ –∑–Ω–∞—á–µ–Ω–Ω—è:** 
  - `RocketWheelLite` - –ª–µ–≥–∫–∞ —Ç–µ–º–∞ (–∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º)
  - `RocketWheelPro` - –ø—Ä–µ–º—ñ—É–º —Ç–µ–º–∞
- **–ü—Ä–∏–∫–ª–∞–¥:** `?style=RocketWheelPro`

#### `sectors`
- **–¢–∏–ø:** String (comma-separated)
- **–û–ø–∏—Å:** –°–ø–∏—Å–æ–∫ –ø—Ä–∏–∑—ñ–≤ –¥–ª—è —Å–µ–∫—Ç–æ—Ä—ñ–≤ –∫–æ–ª–µ—Å–∞
- **–§–æ—Ä–º–∞—Ç:** –¢–µ–∫—Å—Ç–æ–≤—ñ –∑–Ω–∞—á–µ–Ω–Ω—è —á–µ—Ä–µ–∑ –∫–æ–º—É –∑ –ø—Ä–æ–±—ñ–ª–æ–º: `"500 USD, 5000 USD, 10 FS, ..."`
- **–ö—ñ–ª—å–∫—ñ—Å—Ç—å:** –†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ 8 —Å–µ–∫—Ç–æ—Ä—ñ–≤ (–ø–æ–≤–∏–Ω–Ω–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—Ç–∏ –∫—ñ–ª—å–∫–æ—Å—Ç—ñ `sectors_type`)
- **URL encoding:** –ü—Ä–æ–±—ñ–ª–∏ —Ç–∞ —Å–ø–µ—Ü—Å–∏–º–≤–æ–ª–∏ –ø–æ–≤–∏–Ω–Ω—ñ –±—É—Ç–∏ –∑–∞–∫–æ–¥–æ–≤–∞–Ω—ñ (`%20` –¥–ª—è –ø—Ä–æ–±—ñ–ª—ñ–≤)
- **–î–µ–∫–æ–¥–æ–≤–∞–Ω–∏–π –ø—Ä–∏–∫–ª–∞–¥:** `500 USD, 5000 USD, 10 FS, 20 FS, 35 FS, 25 USD, 100 USD, 250 USD`

#### `sectors_type`
- **–¢–∏–ø:** String (comma-separated)
- **–û–ø–∏—Å:** –¢–∏–ø–∏ –ø—Ä–∏–∑—ñ–≤ –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ —Å–µ–∫—Ç–æ—Ä–∞
- **–§–æ—Ä–º–∞—Ç:** –¢–µ–∫—Å—Ç–æ–≤—ñ –∑–Ω–∞—á–µ–Ω–Ω—è —á–µ—Ä–µ–∑ –∫–æ–º—É –∑ –ø—Ä–æ–±—ñ–ª–æ–º
- **–ö—ñ–ª—å–∫—ñ—Å—Ç—å:** –ú–∞—î –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—Ç–∏ –∫—ñ–ª—å–∫–æ—Å—Ç—ñ `sectors`
- **–¢–∏–ø–æ–≤—ñ –∑–Ω–∞—á–µ–Ω–Ω—è:** 
  - `Bonus Prize` - –±–æ–Ω—É—Å–Ω—ñ –ø—Ä–∏–∑–∏
  - `Free Spins` - –±–µ–∑–∫–æ—à—Ç–æ–≤–Ω—ñ —Å–ø—ñ–Ω–∏
  - `Cash Prize` - –≥–æ—Ç—ñ–≤–∫–æ–≤—ñ –ø—Ä–∏–∑–∏
  - –ê–±–æ –±—É–¥—å-—è–∫—ñ –∫–∞—Å—Ç–æ–º–Ω—ñ –Ω–∞–∑–≤–∏
- **–î–µ–∫–æ–¥–æ–≤–∞–Ω–∏–π –ø—Ä–∏–∫–ª–∞–¥:** `Bonus Prize, Bonus Prize, Free Spins, Free Spins, Free Spins, Bonus Prize, Bonus Prize, Bonus Prize`

### –û–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏

#### `active`
- **–¢–∏–ø:** Boolean
- **–ó–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º:** `true`
- **–û–ø–∏—Å:** –í–∏–∑–Ω–∞—á–∞—î —á–∏ –∞–∫—Ç–∏–≤–Ω–∏–π –ª—É—Ç–±–æ–∫—Å
- **–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è:** –í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å `false` –¥–ª—è —Ç–∏–º—á–∞—Å–æ–≤–æ–≥–æ –≤—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –≤–∑–∞—î–º–æ–¥—ñ—ó
- **–ü—Ä–∏–∫–ª–∞–¥:** `?active=false`

#### `fps`
- **–¢–∏–ø:** Boolean
- **–ó–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º:** `false`
- **–û–ø–∏—Å:** –ü–æ–∫–∞–∑—É—î FPS-–º–æ–Ω—ñ—Ç–æ—Ä –¥–ª—è –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ
- **–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è:** –£–≤—ñ–º–∫–Ω—ñ—Ç—å –¥–ª—è debug —Ä–µ–∂–∏–º—É
- **–ü—Ä–∏–∫–ª–∞–¥:** `?fps=true`

#### `vip_level`
- **–¢–∏–ø:** Number (integer >= 0)
- **–ó–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º:** `0`
- **–û–ø–∏—Å:** VIP —Ä—ñ–≤–µ–Ω—å –≥—Ä–∞–≤—Ü—è
- **–ü—Ä–∏–∫–ª–∞–¥:** `?vip_level=5`
- **‚ö†Ô∏è –í–∞–∂–ª–∏–≤–æ:** –ü–∞—Ä–∞–º–µ—Ç—Ä **–∑–∞—Ä–µ–∑–µ—Ä–≤–æ–≤–∞–Ω–∏–π –¥–ª—è –º–∞–π–±—É—Ç–Ω—å–æ–≥–æ**. –ù–∞—Ä–∞–∑—ñ –Ω–µ –≤–ø–ª–∏–≤–∞—î –Ω–∞ –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –∫–æ–ª–µ—Å–∞, –∞–ª–µ –≤ –º–∞–π–±—É—Ç–Ω—ñ—Ö –≤–µ—Ä—Å—ñ—è—Ö –º–æ–∂–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏—Å—å –¥–ª—è –∫–∞—Å—Ç–æ–º—ñ–∑–∞—Ü—ñ—ó –¥–∏–∑–∞–π–Ω—É.

### –ü—Ä–∏–∫–ª–∞–¥–∏ –ø–æ–≤–Ω–∏—Ö URL

```
# –ë–∞–∑–æ–≤–∞ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è
https://lootbox.example.com/?style=RocketWheelLite&sectors=100%20USD,200%20USD&sectors_type=Bonus%20Prize,Bonus%20Prize

# –ó VIP —Ä—ñ–≤–Ω–µ–º —Ç–∞ FPS
https://lootbox.example.com/?style=RocketWheelPro&sectors=500%20USD,1000%20USD,50%20FS&sectors_type=Bonus%20Prize,Bonus%20Prize,Free%20Spins&vip_level=3&fps=true
```

---

## üì® PostMessage API - –ü—Ä–æ—Ç–æ–∫–æ–ª –∫–æ–º—É–Ω—ñ–∫–∞—Ü—ñ—ó

### –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Parent Window  ‚îÇ                    ‚îÇ  Lootbox iFrame  ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§                    ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                 ‚îÇ <‚îÄ‚îÄ lootboxReady ‚îÄ‚îÄ‚îÇ  [—ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è] ‚îÇ
‚îÇ                 ‚îÇ                    ‚îÇ                  ‚îÇ
‚îÇ                 ‚îÇ  ‚îÄ‚îÄ‚îÄ‚îÄ startSpin ‚îÄ‚îÄ>‚îÇ  [–æ–±–µ—Ä—Ç–∞–Ω–Ω—è 3—Å]  ‚îÇ
‚îÇ                 ‚îÇ                    ‚îÇ                  ‚îÇ
‚îÇ [–∑–∞–ø–∏—Ç –±–µ–∫–µ–Ω–¥—É] ‚îÇ                    ‚îÇ                  ‚îÇ
‚îÇ                 ‚îÇ                    ‚îÇ                  ‚îÇ
‚îÇ                 ‚îÇ  ‚îÄ‚îÄ‚îÄ winSector ‚îÄ‚îÄ‚îÄ>‚îÇ  [–∑—É–ø–∏–Ω–∫–∞ 14—Å]   ‚îÇ
‚îÇ                 ‚îÇ                    ‚îÇ  [–∞–Ω—ñ–º–∞—Ü—ñ—è ~7—Å]  ‚îÇ
‚îÇ                 ‚îÇ                    ‚îÇ                  ‚îÇ
‚îÇ                 ‚îÇ <‚îÄ‚îÄ‚îÄ‚îÄ spinEnd ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ  [–∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è]    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üì§ –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –≤—ñ–¥ –ª—É—Ç–±–æ–∫—Å–∞ (Outgoing)

### 1. `lootboxReady`

**–ö–æ–ª–∏ –Ω–∞–¥—Å–∏–ª–∞—î—Ç—å—Å—è:** –í—ñ–¥—Ä–∞–∑—É –ø—ñ—Å–ª—è –ø–æ–≤–Ω–æ–≥–æ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –≤—ñ–¥–∂–µ—Ç–∞ —Ç–∞ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—ñ –¥–æ —Ä–æ–±–æ—Ç–∏.

**–§–æ—Ä–º–∞—Ç:**
```javascript
{
  type: 'lootboxReady'
}
```

**–©–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ –∑—Ä–æ–±–∏—Ç–∏:**
- –ó–±–µ—Ä–µ–≥—Ç–∏ —Å—Ç–∞–Ω –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—ñ –≤—ñ–¥–∂–µ—Ç–∞
- –†–æ–∑–±–ª–æ–∫—É–≤–∞—Ç–∏ UI (–∫–Ω–æ–ø–∫—É "–°–ø—ñ–Ω")
- –ú–æ–∂–Ω–∞ –ø–æ—á–∏–Ω–∞—Ç–∏ –≤—ñ–¥–ø—Ä–∞–≤–ª—è—Ç–∏ –∫–æ–º–∞–Ω–¥–∏ –¥–æ –ª—É—Ç–±–æ–∫—Å–∞

---

### 2. `spinEnd`

**–ö–æ–ª–∏ –Ω–∞–¥—Å–∏–ª–∞—î—Ç—å—Å—è:** –ü—ñ—Å–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è –∞–Ω—ñ–º–∞—Ü—ñ—ó –æ–±–µ—Ä—Ç–∞–Ω–Ω—è —Ç–∞ –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –≤–∏–≥—Ä–∞—à—É (~7 —Å–µ–∫—É–Ω–¥ –ø—ñ—Å–ª—è –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –≤–∏–≥—Ä–∞—à–Ω–æ–≥–æ —Å–µ–∫—Ç–æ—Ä–∞).

**–§–æ—Ä–º–∞—Ç:**
```javascript
{
  type: 'spinEnd',
  data: {
    prize: '500 USD',        // –¢–µ–∫—Å—Ç –ø—Ä–∏–∑—É –∑ –≤–∏–≥—Ä–∞—à–Ω–æ–≥–æ —Å–µ–∫—Ç–æ—Ä–∞
    timestamp: 1697539200000 // Unix timestamp (milliseconds)
  }
}
```

**–©–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ –∑—Ä–æ–±–∏—Ç–∏:**
- –û–±—Ä–æ–±–∏—Ç–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç (–Ω–∞—Ä–∞—Ö—É–≤–∞—Ç–∏ –ø—Ä–∏–∑, –æ–Ω–æ–≤–∏—Ç–∏ –±–∞–ª–∞–Ω—Å)
- –ü–æ–∫–∞–∑–∞—Ç–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—É –ø—Ä–æ –≤–∏–≥—Ä–∞—à
- –ó–∞–ª–æ–≥—É–≤–∞—Ç–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç (–∞–Ω–∞–ª—ñ—Ç–∏–∫–∞, –±–µ–∫–µ–Ω–¥)
- –°–∫–∏–Ω—É—Ç–∏ —Å—Ç–∞–Ω –¥–ª—è –Ω–∞—Å—Ç—É–ø–Ω–æ—ó –≥—Ä–∏

---

## üì• –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –¥–æ –ª—É—Ç–±–æ–∫—Å–∞ (Incoming)

### 1. `startSpin`

**–ö–æ–ª–∏ –≤—ñ–¥–ø—Ä–∞–≤–ª—è—Ç–∏:** –ö–æ–ª–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á —ñ–Ω—ñ—Ü—ñ—é—î –æ–±–µ—Ä—Ç–∞–Ω–Ω—è (–Ω–∞—Ç–∏—Å–∫–∞—î –∫–Ω–æ–ø–∫—É "–°–ø—ñ–Ω").

**–§–æ—Ä–º–∞—Ç:**
```javascript
{
  type: 'startSpin'
}
```

**–©–æ –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è:**
- –ö–æ–ª–µ—Å–æ –ø–æ—á–∏–Ω–∞—î –æ–±–µ—Ä—Ç–∞—Ç–∏—Å—è –∑—ñ —Å—Ç–∞–ª–æ—é —à–≤–∏–¥–∫—ñ—Å—Ç—é
- –ê–Ω—ñ–º–∞—Ü—ñ—è —Ç—Ä–∏–≤–∞—î **3 —Å–µ–∫—É–Ω–¥–∏** —É —Ä–µ–∂–∏–º—ñ –æ—á—ñ–∫—É–≤–∞–Ω–Ω—è
- –Ø–∫—â–æ –ø—Ä–æ—Ç—è–≥–æ–º —Ü—å–æ–≥–æ —á–∞—Å—É –Ω–µ –æ—Ç—Ä–∏–º–∞–Ω–æ `winSector`, –∫–æ–ª–µ—Å–æ –ø—Ä–æ–¥–æ–≤–∂—É—î –æ–±–µ—Ä—Ç–∞—Ç–∏—Å—è

**–í–∞–∂–ª–∏–≤–æ:**
- –í—ñ–¥–ø—Ä–∞–≤–ª—è–π—Ç–µ **—Ç—ñ–ª—å–∫–∏ –ø—ñ—Å–ª—è** –æ—Ç—Ä–∏–º–∞–Ω–Ω—è `lootboxReady`
- –ü—ñ—Å–ª—è –≤—ñ–¥–ø—Ä–∞–≤–∫–∏ –≤—ñ–¥—Ä–∞–∑—É —Ä–æ–±—ñ—Ç—å –∑–∞–ø–∏—Ç –Ω–∞ –±–µ–∫–µ–Ω–¥ –¥–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –≤–∏–≥—Ä–∞—à–Ω–æ–≥–æ —Å–µ–∫—Ç–æ—Ä–∞

---

### 2. `winSector`

**–ö–æ–ª–∏ –≤—ñ–¥–ø—Ä–∞–≤–ª—è—Ç–∏:** –ü—ñ—Å–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –≤–∏–≥—Ä–∞—à–Ω–æ–≥–æ —Å–µ–∫—Ç–æ—Ä–∞ –∑ –±–µ–∫–µ–Ω–¥–∞ (–∑–∞–∑–≤–∏—á–∞–π —á–µ—Ä–µ–∑ 500-2000–º—Å –ø—ñ—Å–ª—è `startSpin`).

**–§–æ—Ä–º–∞—Ç:**
```javascript
{
  type: 'winSector',
  data: 5  // –ù–æ–º–µ—Ä –≤–∏–≥—Ä–∞—à–Ω–æ–≥–æ —Å–µ–∫—Ç–æ—Ä–∞ (Number)
}
```

**–ù—É–º–µ—Ä–∞—Ü—ñ—è —Å–µ–∫—Ç–æ—Ä—ñ–≤:**
- –°–µ–∫—Ç–æ—Ä–∏ –Ω—É–º–µ—Ä—É—é—Ç—å—Å—è –≤—ñ–¥ `0` –¥–æ `N-1` (–¥–µ N - –∫—ñ–ª—å–∫—ñ—Å—Ç—å —Å–µ–∫—Ç–æ—Ä—ñ–≤)
- –î–ª—è 8-—Å–µ–∫—Ç–æ—Ä–Ω–æ–≥–æ –∫–æ–ª–µ—Å–∞: `0, 1, 2, 3, 4, 5, 6, 7`
- –í—ñ–¥–ª—ñ–∫ **–∑–∞ –≥–æ–¥–∏–Ω–Ω–∏–∫–æ–≤–æ—é —Å—Ç—Ä—ñ–ª–∫–æ—é**, –ø–æ—á–∏–Ω–∞—é—á–∏ –∑ –≤–µ—Ä—Ö–Ω—å–æ–≥–æ —Å–µ–∫—Ç–æ—Ä–∞ (–ø—ñ–¥ —Å—Ç—Ä—ñ–ª–∫–æ—é)
- –Ü–Ω–¥–µ–∫—Å –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î –ø–æ–∑–∏—Ü—ñ—ó –≤ –º–∞—Å–∏–≤–∞—Ö `sectors` —Ç–∞ `sectors_type`

**–í—ñ–∑—É–∞–ª—ñ–∑–∞—Ü—ñ—è –Ω—É–º–µ—Ä–∞—Ü—ñ—ó:**
```
        [0] ‚Üê –°—Ç—Ä—ñ–ª–∫–∞ (pointer)
    [7]     [1]
  
[6]           [2]

    [5]     [3]
        [4]
```

**–©–æ –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è:**
- –ö–æ–ª–µ—Å–æ –ø–æ—á–∏–Ω–∞—î –ø–ª–∞–≤–Ω–æ –≥–∞–ª—å–º—É–≤–∞—Ç–∏
- –ó–∞–≥–∞–ª—å–Ω–∞ —Ç—Ä–∏–≤–∞–ª—ñ—Å—Ç—å –∞–Ω—ñ–º–∞—Ü—ñ—ó –≤—ñ–¥ `startSpin`: **14 —Å–µ–∫—É–Ω–¥**
- –ö–æ–ª–µ—Å–æ –∑—É–ø–∏–Ω—è—î—Ç—å—Å—è —Ç–æ—á–Ω–æ –Ω–∞ –≤–∫–∞–∑–∞–Ω–æ–º—É —Å–µ–∫—Ç–æ—Ä—ñ
- –ü–æ–∫–∞–∑—É—î—Ç—å—Å—è –∞–Ω—ñ–º–∞—Ü—ñ—è –≤–∏–≥—Ä–∞—à—É (~7 —Å–µ–∫—É–Ω–¥)
- –í—ñ–¥–ø—Ä–∞–≤–ª—è—î—Ç—å—Å—è `spinEnd` –∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º

**–í–∞–∂–ª–∏–≤–æ:**
- `winSector` –º–∞—î –±—É—Ç–∏ –≤—ñ–¥–ø—Ä–∞–≤–ª–µ–Ω–∏–π **–ø—ñ—Å–ª—è** `startSpin`
- –Ü–Ω–¥–µ–∫—Å –ø–æ–≤–∏–Ω–µ–Ω –±—É—Ç–∏ –≤–∞–ª—ñ–¥–Ω–∏–º (0 –¥–æ N-1)
- –ù–µ–≤–∞–ª—ñ–¥–Ω–∏–π —ñ–Ω–¥–µ–∫—Å –º–æ–∂–µ –ø—Ä–∏–∑–≤–µ—Å—Ç–∏ –¥–æ –ø–æ–º–∏–ª–æ–∫ –∞–Ω—ñ–º–∞—Ü—ñ—ó

---

## üîÑ –ñ–∏—Ç—Ç—î–≤–∏–π —Ü–∏–∫–ª –≥—Ä–∏

### –ü–æ—Å–ª—ñ–¥–æ–≤–Ω—ñ—Å—Ç—å –ø–æ–¥—ñ–π

1. **–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è:** –°—Ç–≤–æ—Ä–µ–Ω–Ω—è iframe –∑ URL —Ç–∞ query-–ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
2. **–Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è:** –õ—É—Ç–±–æ–∫—Å –∑–∞–≤–∞–Ω—Ç–∞–∂—É—î —Ä–µ—Å—É—Ä—Å–∏ ‚Üí –≤—ñ–¥–ø—Ä–∞–≤–ª—è—î `lootboxReady`
3. **–ì–æ—Ç–æ–≤–Ω—ñ—Å—Ç—å:** Parent –æ—Ç—Ä–∏–º—É—î `lootboxReady` ‚Üí —Ä–æ–∑–±–ª–æ–∫–æ–≤—É—î UI
4. **–ó–∞–ø—É—Å–∫:** –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –Ω–∞—Ç–∏—Å–∫–∞—î "–°–ø—ñ–Ω" ‚Üí Parent –≤—ñ–¥–ø—Ä–∞–≤–ª—è—î `startSpin`
5. **–û–±–µ—Ä—Ç–∞–Ω–Ω—è:** –ö–æ–ª–µ—Å–æ –æ–±–µ—Ä—Ç–∞—î—Ç—å—Å—è (3 —Å–µ–∫ —É —Ä–µ–∂–∏–º—ñ –æ—á—ñ–∫—É–≤–∞–Ω–Ω—è)
6. **–ó–∞–ø–∏—Ç:** Parent —Ä–æ–±–∏—Ç—å –∑–∞–ø–∏—Ç –Ω–∞ –±–µ–∫–µ–Ω–¥ –¥–ª—è –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è –≤–∏–≥—Ä–∞—à—É
7. **–í—ñ–¥–ø–æ–≤—ñ–¥—å:** –ë–µ–∫–µ–Ω–¥ –ø–æ–≤–µ—Ä—Ç–∞—î –Ω–æ–º–µ—Ä –≤–∏–≥—Ä–∞—à–Ω–æ–≥–æ —Å–µ–∫—Ç–æ—Ä–∞
8. **–ó—É–ø–∏–Ω–∫–∞:** Parent –≤—ñ–¥–ø—Ä–∞–≤–ª—è—î `winSector` ‚Üí –∫–æ–ª–µ—Å–æ –≥–∞–ª—å–º—É—î (14 —Å–µ–∫ –∑–∞–≥–∞–ª–æ–º)
9. **–í–∏–≥—Ä–∞—à:** –ü–æ–∫–∞–∑—É—î—Ç—å—Å—è –∞–Ω—ñ–º–∞—Ü—ñ—è –≤–∏–≥—Ä–∞—à—É (~7 —Å–µ–∫)
10. **–ó–∞–≤–µ—Ä—à–µ–Ω–Ω—è:** –õ—É—Ç–±–æ–∫—Å –≤—ñ–¥–ø—Ä–∞–≤–ª—è—î `spinEnd` –∑ –ø—Ä–∏–∑–æ–º
11. **–û–±—Ä–æ–±–∫–∞:** Parent –æ–±—Ä–æ–±–ª—è—î —Ä–µ–∑—É–ª—å—Ç–∞—Ç, –Ω–∞—Ä–∞—Ö–æ–≤—É—î –ø—Ä–∏–∑

### –¢–∞–π–º–∏–Ω–≥–∏

- **–ü–æ—á–∞—Ç–∫–æ–≤–µ –æ–±–µ—Ä—Ç–∞–Ω–Ω—è:** 3 —Å–µ–∫—É–Ω–¥–∏ (–¥–æ –æ—Ç—Ä–∏–º–∞–Ω–Ω—è `winSector`)
- **–ü–æ–≤–Ω–∞ –∞–Ω—ñ–º–∞—Ü—ñ—è:** 14 —Å–µ–∫—É–Ω–¥ –≤—ñ–¥ `startSpin` –¥–æ –∑—É–ø–∏–Ω–∫–∏
- **–ê–Ω—ñ–º–∞—Ü—ñ—è –≤–∏–≥—Ä–∞—à—É:** ~7 —Å–µ–∫—É–Ω–¥
- **–ó–∞–≥–∞–ª—å–Ω–∏–π —á–∞—Å:** ~14-21 —Å–µ–∫—É–Ω–¥ –≤—ñ–¥ —Å—Ç–∞—Ä—Ç—É –¥–æ `spinEnd`

---

## ‚ö†Ô∏è –ö—Ä–∏—Ç–∏—á–Ω—ñ –º–æ–º–µ–Ω—Ç–∏

### 1. –ü–æ—Ä—è–¥–æ–∫ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å

**–ü—Ä–∞–≤–∏–ª—å–Ω–æ:**
```
1. lootboxReady (–≤—ñ–¥ iframe)
2. startSpin (–¥–æ iframe)
3. winSector (–¥–æ iframe)
4. spinEnd (–≤—ñ–¥ iframe)
```

**–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ:**
- –í—ñ–¥–ø—Ä–∞–≤–∫–∞ `startSpin` –¥–æ –æ—Ç—Ä–∏–º–∞–Ω–Ω—è `lootboxReady` ‚Üí –≥—Ä–∞ –Ω–µ –∑–∞–ø—É—Å—Ç–∏—Ç—å—Å—è
- –í—ñ–¥–ø—Ä–∞–≤–∫–∞ `winSector` –±–µ–∑ –ø–æ–ø–µ—Ä–µ–¥–Ω—å–æ–≥–æ `startSpin` ‚Üí –±—É–¥–µ –ø—Ä–æ—ñ–≥–Ω–æ—Ä–æ–≤–∞–Ω–æ
- –ü–æ–≤—Ç–æ—Ä–Ω–∞ –≤—ñ–¥–ø—Ä–∞–≤–∫–∞ `startSpin` –ø—ñ–¥ —á–∞—Å –≥—Ä–∏ ‚Üí –º–æ–∂–µ —Å–ø—Ä–∏—á–∏–Ω–∏—Ç–∏ –ø–æ–º–∏–ª–∫–∏

### 2. –í–∞–ª—ñ–¥–∞—Ü—ñ—è –¥–∞–Ω–∏—Ö

**–Ü–Ω–¥–µ–∫—Å —Å–µ–∫—Ç–æ—Ä–∞:**
- –ú–∞—î –±—É—Ç–∏ —Ü—ñ–ª–∏–º —á–∏—Å–ª–æ–º (integer)
- –î—ñ–∞–ø–∞–∑–æ–Ω: 0 –¥–æ `sectors.length - 1`
- –ù–µ–≤–∞–ª—ñ–¥–Ω–∏–π —ñ–Ω–¥–µ–∫—Å ‚Üí –Ω–µ–∫–æ—Ä–µ–∫—Ç–Ω–∞ –∞–Ω—ñ–º–∞—Ü—ñ—è

**–ö—ñ–ª—å–∫—ñ—Å—Ç—å —Å–µ–∫—Ç–æ—Ä—ñ–≤:**
- –ú–∞—Å–∏–≤–∏ `sectors` —Ç–∞ `sectors_type` –ø–æ–≤–∏–Ω–Ω—ñ –º–∞—Ç–∏ –æ–¥–Ω–∞–∫–æ–≤—É –¥–æ–≤–∂–∏–Ω—É
- –†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ: 8 —Å–µ–∫—Ç–æ—Ä—ñ–≤
- –ú—ñ–Ω—ñ–º—É–º: 2 —Å–µ–∫—Ç–æ—Ä–∏

### 3. –¢–∞–π–º–∞—É—Ç–∏ —Ç–∞ –ø–æ–º–∏–ª–∫–∏

**–Ø–∫—â–æ –±–µ–∫–µ–Ω–¥ –Ω–µ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î:**
- –†–µ–∞–ª—ñ–∑—É–π—Ç–µ timeout (—Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ 5 —Å–µ–∫—É–Ω–¥)
- –ü–µ—Ä–µ–¥–±–∞—á—Ç–µ fallback —Å—Ü–µ–Ω–∞—Ä—ñ–π (–≤–∏–ø–∞–¥–∫–æ–≤–∏–π —Å–µ–∫—Ç–æ—Ä –∞–±–æ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—Ä–æ –ø–æ–º–∏–ª–∫—É)
- –ü–æ–∫–∞–∑—É–π—Ç–µ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—É —Å—Ç–∞–Ω –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è

**–Ø–∫—â–æ –Ω–µ –≤—ñ–¥–ø—Ä–∞–≤–∏—Ç–∏ `winSector`:**
- –ö–æ–ª–µ—Å–æ –æ–±–µ—Ä—Ç–∞—Ç–∏–º–µ—Ç—å—Å—è –Ω–µ—Å–∫—ñ–Ω—á–µ–Ω–Ω–æ
- –ü–æ—Ç—Ä—ñ–±–µ–Ω fallback –º–µ—Ö–∞–Ω—ñ–∑–º –∑ —Ç–∞–π–º–∞—É—Ç–æ–º

### 4. –ë–µ–∑–ø–µ–∫–∞ PostMessage

**Origin verification:**
- –ó–∞–≤–∂–¥–∏ –ø–µ—Ä–µ–≤—ñ—Ä—è–π—Ç–µ `event.origin` –ø—Ä–∏ –æ–±—Ä–æ–±—Ü—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å
- –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ whitelist –¥–æ–∑–≤–æ–ª–µ–Ω–∏—Ö –¥–æ–º–µ–Ω—ñ–≤
- –ù–µ –ø—Ä–∏–π–º–∞–π—Ç–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –∑ –Ω–µ–¥–æ–≤—ñ—Ä–µ–Ω–∏—Ö –¥–∂–µ—Ä–µ–ª

### 5. URL Encoding

**Query –ø–∞—Ä–∞–º–µ—Ç—Ä–∏:**
- –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ `URLSearchParams` –¥–ª—è —Ñ–æ—Ä–º—É–≤–∞–Ω–Ω—è URL
- –ü—Ä–æ–±—ñ–ª–∏ –∫–æ–¥—É—é—Ç—å—Å—è —è–∫ `%20`
- –ö–æ–º–∏ –≤ —Å–ø–∏—Å–∫–∞—Ö `sectors` —Ç–∞ `sectors_type` –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è —è–∫ —î (–∑ –ø—Ä–æ–±—ñ–ª–∞–º–∏)

---

## üéØ –í—ñ–¥–º—ñ–Ω–Ω–æ—Å—Ç—ñ –≤—ñ–¥ Vue –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞

### Props ‚Üí Query Parameters

**–ë—É–ª–æ (Vue –∫–æ–º–ø–æ–Ω–µ–Ω—Ç):**
```vue
:sections="sectionsArray"
:winnerSection="winnerIndex"
```

**–°—Ç–∞–ª–æ (iframe):**
```
?sectors=500%20USD,1000%20USD
&sectors_type=Bonus%20Prize,Bonus%20Prize
```

### Events ‚Üí PostMessage

**–ë—É–ª–æ (Vue –∫–æ–º–ø–æ–Ω–µ–Ω—Ç):**
```vue
@finishSpinWheel="handleFinish"
```

**–°—Ç–∞–ª–æ (iframe):**
```javascript
window.addEventListener('message', (event) => {
  if (event.data.type === 'spinEnd') {
    // –û–±—Ä–æ–±–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è
  }
});
```

### Methods ‚Üí PostMessage Commands

**–ë—É–ª–æ (Vue –∫–æ–º–ø–æ–Ω–µ–Ω—Ç):**
```javascript
this.$refs.lootbox.runWheel()
```

**–°—Ç–∞–ª–æ (iframe):**
```javascript
iframe.contentWindow.postMessage({ type: 'startSpin' }, '*')
```

### –ü–µ—Ä–µ–¥–∞—á–∞ –≤–∏–≥—Ä–∞—à—É

**–ë—É–ª–æ (Vue –∫–æ–º–ø–æ–Ω–µ–Ω—Ç):**
- Prop `winnerSection` –≤—Å—Ç–∞–Ω–æ–≤–ª—é–≤–∞–≤—Å—è –¥–æ –∞–±–æ –ø—ñ—Å–ª—è –∑–∞–ø—É—Å–∫—É
- –ú–æ–∂–Ω–∞ –±—É–ª–æ –∑–º—ñ–Ω–∏—Ç–∏ –≤ –±—É–¥—å-—è–∫–∏–π –º–æ–º–µ–Ω—Ç

**–°—Ç–∞–ª–æ (iframe):**
- `winSector` –≤—ñ–¥–ø—Ä–∞–≤–ª—è—î—Ç—å—Å—è —Ç—ñ–ª—å–∫–∏ –ø—ñ—Å–ª—è `startSpin`
- –í—ñ–¥–ø—Ä–∞–≤–ª—è—î—Ç—å—Å—è –æ–¥–∏–Ω —Ä–∞–∑ –∑–∞ –≥—Ä—É
- –û—Ç—Ä–∏–º—É—î—Ç—å—Å—è –∑ –±–µ–∫–µ–Ω–¥–∞ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ

---

## üß™ –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è

### –¢–µ—Å—Ç–æ–≤–∏–π —Ñ–∞–π–ª

–£ –ø—Ä–æ–µ–∫—Ç—ñ —î –≥–æ—Ç–æ–≤–∏–π `test-lootbox.html` –¥–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—ó:

**–Ø–∫ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏:**
1. –ó–∞–ø—É—Å—Ç–∏—Ç–∏ dev-—Å–µ—Ä–≤–µ—Ä: `npm run dev`
2. –í—ñ–¥–∫—Ä–∏—Ç–∏ `http://localhost:5173/test-lootbox.html`
3. –ù–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏ (—Ç–µ–º–∞, —Å–µ–∫—Ç–æ—Ä–∏, VIP —Ä—ñ–≤–µ–Ω—å)
4. –ù–∞—Ç–∏—Å–Ω—É—Ç–∏ "–ó–∞–ø—É—Å—Ç–∏—Ç–∏" (–≤—ñ–¥–ø—Ä–∞–≤–∏—Ç—å `startSpin`)
5. –í–∏–±—Ä–∞—Ç–∏ –≤–∏–≥—Ä–∞—à–Ω–∏–π —Å–µ–∫—Ç–æ—Ä (0-7) —ñ –Ω–∞—Ç–∏—Å–Ω—É—Ç–∏ "–ó–∞—Å—Ç–æ—Å—É–≤–∞—Ç–∏" (–≤—ñ–¥–ø—Ä–∞–≤–∏—Ç—å `winSector`)
6. –ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ –ª–æ–≥–∏ PostMessage –∫–æ–º—É–Ω—ñ–∫–∞—Ü—ñ—ó

### Debug —Ä–µ–∂–∏–º

**–£–≤—ñ–º–∫–Ω—É—Ç–∏ FPS –º–æ–Ω—ñ—Ç–æ—Ä:**
```
?fps=true
```

**–õ–æ–≥—É–≤–∞–Ω–Ω—è –≤—Å—ñ—Ö –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å:**
```javascript
window.addEventListener('message', (event) => {
  console.log('[Lootbox]', event.data.type, event.data);
});
```

---

## üìã –ö–æ–Ω—Ç—Ä–æ–ª—å–Ω–∏–π —Å–ø–∏—Å–æ–∫

### –ü—ñ–¥–≥–æ—Ç–æ–≤–∫–∞
- [ ] –í–∏–∑–Ω–∞—á–µ–Ω–æ URL –≤—ñ–¥–∂–µ—Ç–∞
- [ ] –°—Ç–≤–æ—Ä–µ–Ω–æ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—é —Å–µ–∫—Ç–æ—Ä—ñ–≤ (`sectors`, `sectors_type`)
- [ ] –ù–∞–ª–∞—à—Ç–æ–≤–∞–Ω–æ API endpoint –¥–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –≤–∏–≥—Ä–∞—à–Ω–æ–≥–æ —Å–µ–∫—Ç–æ—Ä–∞
- [ ] –ù–∞–ª–∞—à—Ç–æ–≤–∞–Ω–æ API endpoint –¥–ª—è –Ω–∞—Ä–∞—Ö—É–≤–∞–Ω–Ω—è –ø—Ä–∏–∑—ñ–≤

### –†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è
- [ ] –°—Ç–≤–æ—Ä–µ–Ω–æ iframe –∑ –¥–∏–Ω–∞–º—ñ—á–Ω–∏–º URL
- [ ] –†–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ —Å–ª—É—Ö–∞—á –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å –≤—ñ–¥ iframe
- [ ] –û–±—Ä–æ–±–ª—è—î—Ç—å—Å—è `lootboxReady` ‚Üí —Ä–æ–∑–±–ª–æ–∫—É–≤–∞–Ω–Ω—è UI
- [ ] –û–±—Ä–æ–±–ª—è—î—Ç—å—Å—è `spinEnd` ‚Üí –Ω–∞—Ä–∞—Ö—É–≤–∞–Ω–Ω—è –ø—Ä–∏–∑—É
- [ ] –†–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ –≤—ñ–¥–ø—Ä–∞–≤–∫—É `startSpin` –ø—Ä–∏ –∫–ª—ñ–∫—É –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
- [ ] –†–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ –∑–∞–ø–∏—Ç –Ω–∞ –±–µ–∫–µ–Ω–¥ –ø—ñ—Å–ª—è `startSpin`
- [ ] –†–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ –≤—ñ–¥–ø—Ä–∞–≤–∫—É `winSector` –ø—ñ—Å–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ –±–µ–∫–µ–Ω–¥–∞
- [ ] –î–æ–¥–∞–Ω–æ –æ–±—Ä–æ–±–∫—É –ø–æ–º–∏–ª–æ–∫ (timeout, network errors)
- [ ] –î–æ–¥–∞–Ω–æ –≤–∞–ª—ñ–¥–∞—Ü—ñ—é —ñ–Ω–¥–µ–∫—Å—É —Å–µ–∫—Ç–æ—Ä–∞

### –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è
- [ ] –ü–µ—Ä–µ–≤—ñ—Ä–µ–Ω–æ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –∑ —Ä—ñ–∑–Ω–∏–º–∏ —Ç–µ–º–∞–º–∏ (`RocketWheelLite`, `RocketWheelPro`)
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–æ–≤–∞–Ω–æ –≤—Å—ñ —Å–µ–∫—Ç–æ—Ä–∏ (0 –¥–æ N-1)
- [ ] –ü–µ—Ä–µ–≤—ñ—Ä–µ–Ω–æ –æ–±—Ä–æ–±–∫—É –ø–æ–º–∏–ª–æ–∫ –±–µ–∫–µ–Ω–¥–∞
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–æ–≤–∞–Ω–æ –Ω–∞ —Ä—ñ–∑–Ω–∏—Ö –ø—Ä–∏—Å—Ç—Ä–æ—è—Ö (desktop, mobile, tablet)
- [ ] –ü–µ—Ä–µ–≤—ñ—Ä–µ–Ω–æ responsive –¥–∏–∑–∞–π–Ω
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–æ–≤–∞–Ω–æ –∑ —Ä—ñ–∑–Ω–∏–º–∏ VIP —Ä—ñ–≤–Ω—è–º–∏

### Production
- [ ] –ù–∞–ª–∞—à—Ç–æ–≤–∞–Ω–æ –ø–µ—Ä–µ–≤—ñ—Ä–∫—É `event.origin` –¥–ª—è –±–µ–∑–ø–µ–∫–∏
- [ ] –î–æ–¥–∞–Ω–æ –∞–Ω–∞–ª—ñ—Ç–∏–∫—É (tracking –ø–æ–¥—ñ–π)
- [ ] –†–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ –æ–±—Ä–æ–±–∫—É edge cases
- [ ] –ü—Ä–æ–≤–µ–¥–µ–Ω–æ –Ω–∞–≤–∞–Ω—Ç–∞–∂—É–≤–∞–ª—å–Ω–µ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è

---

## üÜò –¢–∏–ø–æ–≤—ñ –ø—Ä–æ–±–ª–µ–º–∏

### –õ—É—Ç–±–æ–∫—Å –Ω–µ –∑–∞–≤–∞–Ω—Ç–∞–∂—É—î—Ç—å—Å—è
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ URL —Ç–∞ query-–ø–∞—Ä–∞–º–µ—Ç—Ä–∏
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ CORS –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è
- –í—ñ–¥–∫—Ä–∏–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ –¥–ª—è –ø–æ–º–∏–ª–æ–∫

### –ù–µ –æ—Ç—Ä–∏–º—É—é `lootboxReady`
- –°–ª—É—Ö–∞—á `message` –º–∞—î –±—É—Ç–∏ –¥–æ–¥–∞–Ω–∏–π –î–û –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è `iframe.src`
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —â–æ –Ω–µ —Ñ—ñ–ª—å—Ç—Ä—É—î—Ç–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –∑–∞ `event.origin` –Ω–∞–¥—Ç–æ —Å—Ç—Ä–æ–≥–æ

### –ö–æ–ª–µ—Å–æ –æ–±–µ—Ä—Ç–∞—î—Ç—å—Å—è –Ω–µ—Å–∫—ñ–Ω—á–µ–Ω–Ω–æ
- –ù–µ –≤—ñ–¥–ø—Ä–∞–≤–ª–µ–Ω–æ `winSector` –∞–±–æ –≤—ñ–¥–ø—Ä–∞–≤–ª–µ–Ω–æ –∑ –ø–æ–º–∏–ª–∫–æ—é
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —â–æ —ñ–Ω–¥–µ–∫—Å —Å–µ–∫—Ç–æ—Ä–∞ –≤–∞–ª—ñ–¥–Ω–∏–π
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —â–æ `winSector` –≤—ñ–¥–ø—Ä–∞–≤–ª–µ–Ω–æ –ø—ñ—Å–ª—è `startSpin`

### –ù–µ–≤—ñ—Ä–Ω–∏–π –ø—Ä–∏–∑ —É `spinEnd`
- –Ü–Ω–¥–µ–∫—Å `winSector` –Ω–µ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î –º–∞—Å–∏–≤—É `sectors`
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ø–æ—Ä—è–¥–æ–∫ –µ–ª–µ–º–µ–Ω—Ç—ñ–≤ —É `sectors` —Ç–∞ `sectors_type`
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —â–æ —ñ–Ω–¥–µ–∫—Å –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î –≤—ñ–∑—É–∞–ª—å–Ω—ñ–π –Ω—É–º–µ—Ä–∞—Ü—ñ—ó –∫–æ–ª–µ—Å–∞

### –ü—Ä–æ–±–ª–µ–º–∏ –∑ mobile
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ `aspect-ratio` iframe (–º–∞—î –±—É—Ç–∏ 1:1)
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —â–æ iframe –º–∞—î –∫–æ—Ä–µ–∫—Ç–Ω—É —à–∏—Ä–∏–Ω—É/–≤–∏—Å–æ—Ç—É
- –ü—Ä–æ—Ç–µ—Å—Ç—É–π—Ç–µ –Ω–∞ —Ä–µ–∞–ª—å–Ω–∏—Ö –ø—Ä–∏—Å—Ç—Ä–æ—è—Ö

---

## üìû –î–æ–¥–∞—Ç–∫–æ–≤—ñ —Ä–µ—Å—É—Ä—Å–∏

- **–¢–µ—Å—Ç–æ–≤–∏–π —Ñ–∞–π–ª:** `test-lootbox.html` - reference implementation
- **–¢–µ—Ö–Ω—ñ—á–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è:** `DOCUMENTATION.md` - –¥–µ—Ç–∞–ª—ñ –ø—Ä–æ –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä—É –≤—ñ–¥–∂–µ—Ç–∞
- **–ö–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞:** Network tab + Console –¥–ª—è –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

---

**–í–µ—Ä—Å—ñ—è:** 1.0  
**–î–∞—Ç–∞:** 17 –∂–æ–≤—Ç–Ω—è 2025
